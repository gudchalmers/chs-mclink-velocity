plugins {
    id 'com.github.johnrengelman.shadow' version '5.2.0'
    id 'java'
}

group 'se.gory_moon'
version '1.1.0'

sourceCompatibility = 1.8

configurations {
    shade
}

shadowJar {
    configurations = [project.configurations.shade]
    archiveClassifier = ''
}

import com.github.jengelman.gradle.plugins.shadow.tasks.ConfigureShadowRelocation

task relocateShadowJar(type: ConfigureShadowRelocation) {
    target = tasks.shadowJar
    prefix = "se.gory_moon.mclink.shadow"
}

tasks.shadowJar.dependsOn tasks.relocateShadowJar

repositories {
    mavenCentral()
    maven {
        name 'velocity'
        url 'https://nexus.velocitypowered.com/repository/maven-public/'
    }
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'

    def okhttp = "com.squareup.okhttp3:okhttp:4.9.0"
    implementation okhttp
    shade okhttp

    compile 'com.velocitypowered:velocity-api:1.1.4'
    annotationProcessor 'com.velocitypowered:velocity-api:1.1.4'
}
